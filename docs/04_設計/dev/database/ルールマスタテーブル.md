# テーブル定義書

---

## 1. テーブル論理名

ルールマスタ

---

## 2. テーブル物理名

CM_M_RULE_DEF

---

## 3. 概要

バリデーションや整合性チェックのルール（型、範囲、正規表現、他テーブル参照、適用範囲、優先度、エラーメッセージなど）を管理する。

---

## 4. テーブル定義

| No | 論理名         | 物理名         | データ型 | 桁数 | PK | NN | 初期値 | 備考         |
|----|----------------|----------------|----------|------|----|----|--------|--------------|
| 1  | ルールID       | RULE_ID        | varchar  | 50   | ○  | ○  |        |              |
| 2  | ルールグループ | RULE_GROUP     | varchar  | 50   |    |    |        | 複数ルールをまとめるグループ|
| 3  | マスタID       | MST_ID         | varchar  | 50   |    | ○  |        |              |
| 4  | カラム名       | COL_NAME       | varchar  | 100  |    |    |        |              |
| 5  | バリデ種別     | VALID_TYPE     | varchar  | 30   |    | ○  |        | 型/範囲/正規表現/参照等|
| 6  | 適用範囲       | SCOPE          | varchar  | 30   |    |    |        | テーブル/カラム/リレーション|
| 7  | 条件式         | CONDITION_EXPR | varchar  | 200  |    |    |        |              |
| 8  | 優先度         | PRIORITY       | int      |      |    |    |        |              |
| 9  | エラーメッセージ| ERROR_MSG      | varchar  | 200  |    |    |        |              |
| 10 | 有効開始日     | VALID_FROM     | date     |      |    |    |        | ルール有効期間(開始)|
| 11 | 有効終了日     | VALID_TO       | date     |      |    |    |        | ルール有効期間(終了)|
| 12 | 拡張設定       | EXT_JSON       | json     |      |    |    |        | 拡張用設定(JSON)|

---

## 5. インデックス定義

| インデックス名 | カラム名 | ユニーク | 備考 |
|----------------|----------|----------|------|
| PK_CM_M_RULE_DEF| RULE_ID  | ○        | 主キー|

---

## 6. 制約事項

---

## 7. 備考

- ルールグループや有効期間、拡張設定で柔軟なルール管理が可能。

---

## 8. 関連テーブル

| テーブル | 関係性 |
|----------|--------|
| CM_M_MST_DEF | 多対1 |