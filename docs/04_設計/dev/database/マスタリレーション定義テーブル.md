# テーブル定義書

---

## 1. テーブル論理名

マスタリレーション定義

---

## 2. テーブル物理名

CM_M_MST_REL_DEF

---

## 3. 概要

マスタ間の親子関係・外部キー・参照整合性・Cascade設定・必須/任意・チェックタイミング・エラー時アクション・条件式などを管理する。

---

## 4. テーブル定義

| No | 論理名             | 物理名             | データ型 | 桁数 | PK | NN | 初期値 | 備考                         |
|----|--------------------|--------------------|----------|------|----|----|--------|------------------------------|
| 1  | リレーションID     | REL_ID             | varchar  | 50   | ○  | ○  |        |                              |
| 2  | 親マスタID         | PARENT_MST_ID      | varchar  | 50   |    | ○  |        |                              |
| 3  | 親カラム名         | PARENT_COL_NAME    | varchar  | 100  |    | ○  |        |                              |
| 4  | 子マスタID         | CHILD_MST_ID       | varchar  | 50   |    | ○  |        |                              |
| 5  | 子カラム名         | CHILD_COL_NAME     | varchar  | 100  |    | ○  |        |                              |
| 6  | 整合性種別         | CONSISTENCY_TYPE   | varchar  | 30   |    | ○  |        | 参照整合性/存在/一意/Cascade等|
| 7  | チェックタイミング | CHECK_TIMING       | varchar  | 30   |    |    |        | 登録/更新/削除/表示          |
| 8  | 必須フラグ         | REQUIRED           | int      | 1    |    | ○  | 1      | 1:必須 0:任意                |
| 9  | Cascade種別        | CASCADE_TYPE       | varchar  | 30   |    |    |        | 削除/更新/なし                |
| 10 | 条件式             | CONDITION_EXPR     | varchar  | 200  |    |    |        | SQL/式で柔軟指定              |
| 11 | エラー時アクション | ERROR_ACTION       | varchar  | 30   |    |    |        | エラー/警告/キャンセル        |
| 12 | 有効開始日         | VALID_FROM         | date     |      |    |    |        | リレーション有効期間(開始)    |
| 13 | 有効終了日         | VALID_TO           | date     |      |    |    |        | リレーション有効期間(終了)    |
| 14 | リレーション説明   | REL_DESCRIPTION    | varchar  | 200  |    |    |        |                              |
| 15 | 拡張設定           | EXT_JSON           | json     |      |    |    |        | 拡張用設定(JSON)             |

---

## 5. インデックス定義

| インデックス名 | カラム名     | ユニーク | 備考 |
|----------------|--------------|----------|------|
| PK_CM_M_MST_REL_DEF| REL_ID     | ○        | 主キー|

---

## 6. 制約事項

---

## 7. 備考

- 有効期間や説明、拡張設定でリレーションの柔軟な管理が可能。

---

## 8. 関連テーブル

| テーブル | 関係性 |
|----------|--------|
| CM_M_MST_DEF | 多対1 |